"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[5179],{79920:function(e,t,o){var i=o(19755),r=o.n(i),a=o(56884),l=o(55021);class s{constructor(e){var t,o,i;if(i=2e3,(o="bookmarkScrollSpeed")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i,this.$wrapper=e,this.maxBookmarkLevel=2,this.activeBookmarksScrolling=!0,this.scrollingTimer=null,this.headerHeight=r()(".header").height(),this.setUpBookmarkLevelButtons(),this.addSimpleBar(),editmode)this.markLastBookmarkItem(),this.$wrapper.on("click",".link-move-top, .link-move-bottom",this.moveLink.bind(this)).on("click",".bookmark-to-top, .bookmark-to-bottom",this.moveBookmark.bind(this)).on("click",".add-bookmark-btn",this.addNewBookmarkWysiwyg.bind(this)).on("click",".add-link-btn",this.addNewLinkEditable.bind(this));else{this.initBookmarksScrolling(),(0,l.Z)(this.$wrapper.find("h2")),this.$wrapper.on("click",".bookmark-item a",this.handleClickBookmarkItem.bind(this));let e=window.location.hash.substring(1),t=this.$wrapper.find(`.bookmark-item a[href="#${e}"]`);e&&t.length&&t.click()}}addSimpleBar(){let e=this.$wrapper.find(".sidebar-content"),t=e.find(".schedule-snippet").first(),o=e.height();if(t.length&&r()(window).width()>=1024){let i=0;e.children().each(((e,t)=>{i+=r()(t).outerHeight(!0)})),i>o&&(t.addClass("schedule-snippet-short"),t.find(".no-bg").removeClass("no-bg")),i=0,o=e.height()}let i=()=>{r()(window).width()>=1024&&(e.height(o),new a.Z(e[0],{autoHide:!1}))};i(),r()(window).on("resize",i)}addNewBookmarkWysiwyg(){let e=this.$wrapper.find(".bookmark-item:not(.d-none):last");(e.length?e.next(".bookmark-item.d-none"):this.$wrapper.find(".bookmark-item.d-none:first")).removeClass("d-none"),this.markLastBookmarkItem()}markLastBookmarkItem(){let e=this.$wrapper.find(".bookmark-item:not(.d-none)");e.last().length&&(this.$wrapper.find(".bookmark-item").removeClass("last-bookmark"),e.last().addClass("last-bookmark")),1===e.length?e.addClass("no-border-bookmark"):e.removeClass("no-border-bookmark")}addNewLinkEditable(){let e=this.$wrapper.find(".link-item:not(.d-none):last");(e.length?e.next(".link-item.d-none"):this.$wrapper.find(".link-item.d-none:first")).removeClass("d-none")}setUpBookmarkLevelButtons(){this.$wrapper.find(".bookmark-item").each(((e,t)=>{let o=r()(t);this.updateBookmarkLevelState(o),o.find(".bookmark-to-left, .bookmark-to-right").on("click",(e=>{let t=r()(e.currentTarget),i=o.data("config");t.hasClass("bookmark-to-left")&&i.level>0&&(i.level-=1),t.hasClass("bookmark-to-right")&&i.level<this.maxBookmarkLevel&&(i.level+=1),this.setBookmarkConfig(o,i),this.updateBookmarkLevelState(o)}))}))}updateBookmarkLevelState(e){e.data("config")||this.setBookmarkConfig(e,{level:0});let t=e.data("config"),o=e.find(".bookmark-to-left"),i=e.find(".bookmark-to-right"),r=e.find(".bookmark-point-wrapper");o.show(),i.show(),r.show(),0===t.level&&o.hide(),t.level>0&&r.hide(),t.level===this.maxBookmarkLevel&&i.hide(),e.find(".bookmark-item-offset").removeClass("level-0 level-1 level-2").addClass("level-"+t.level)}setBookmarkConfig(e,t){e.data("config",t),editmode&&e.find(".bookmark-item-config").text(JSON.stringify(t))}moveLink(e){let t=r()(e.currentTarget),o=t.closest(".link-item");if(o.hasClass("d-none"))return;let i=o.prev(".link-item:not(.d-none)"),a=o.next(".link-item:not(.d-none)");if(t.hasClass("link-move-top")&&i.length)i.before(o);else{if(!t.hasClass("link-move-bottom")||!a.length)return;a.after(o)}let l=this.$wrapper.find(".link-items .link-item:not(.d-none)").map(((e,t)=>r()(t).data("item"))).get();this.$wrapper.find(".links-order-editable").text(l.join(","))}moveBookmark(e){let t=r()(e.currentTarget),o=t.closest(".bookmark-item");if(o.hasClass("d-none"))return;let i=o.prev(".bookmark-item:not(.d-none)"),a=o.next(".bookmark-item:not(.d-none)");if(t.hasClass("bookmark-to-top")&&i.length)i.before(o);else{if(!t.hasClass("bookmark-to-bottom")||!a.length)return;a.after(o)}let l=this.$wrapper.find(".bookmark-items .bookmark-item:not(.d-none)").map(((e,t)=>r()(t).data("item"))).get();this.$wrapper.find(".bookmarks-order-editable").text(l.join(","))}initBookmarksScrolling(){let e=this.$wrapper.find('.bookmark-item a[href^="#"]').filter(((e,t)=>"#"!==r()(t).attr("href").trim())),t=[];e.each(((e,o)=>{let i=r()(o),a=i.attr("href").substring(1);a=r()("<textarea/>").html(a).val();let l=this.$wrapper.find(`.content-block span[name="${a}"]`);l.length&&t.push({bookmark:i,targetLink:l})})),window.addEventListener("scroll",(()=>{if(!this.activeBookmarksScrolling)return;let o=r()(".header").outerHeight(),i=r()(window).scrollTop()+o+150,a=null,l=null;for(let e of t){let t=e.targetLink.offset().top,o=i-t;t<=i&&(null===l||o<l)&&(a=e.bookmark,l=o)}a?(e.filter(((e,t)=>r()(t).attr("href")!==a.attr("href"))).removeClass("active current"),a.addClass("active current"),a.closest(".bookmark-item").prevAll().find("a").addClass("active")):e.removeClass("active current")}),{passive:!0})}handleClickBookmarkItem(e){this.disableBookmarksScrolling();let t=r()(e.currentTarget),o=t.attr("href").replace("#",""),i=t.closest(".bookmark-item"),a=r()(`[name='${o}']`);i.closest(".bookmark-items").find(".bookmark-item a").removeClass("active current"),i.find("a").addClass("active current"),i.prevAll().find("a").addClass("active");let l=r()("html, body"),s=a.offset().top,n=()=>{l.stop(),this.activeBookmarksScrolling=!0};l.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",n),l.stop().clearQueue().animate({scrollTop:s-this.headerHeight-40},this.bookmarkScrollSpeed,(()=>{let e=a.offset().top;Math.abs(e-s)>200?l.stop().clearQueue().animate({scrollTop:e-this.headerHeight-40},this.bookmarkScrollSpeed/3,(()=>{l.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",n)})):l.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",n)}))}disableBookmarksScrolling(){clearTimeout(this.scrollingTimer),this.activeBookmarksScrolling=!1,this.scrollingTimer=setTimeout((()=>{this.activeBookmarksScrolling=!0}),this.bookmarkScrollSpeed)}}var n=o(51189),k=o(29e3);r()(document).ready((()=>{new s(r()(".icp")),(0,n.Z)(),(0,k.Z)()}))}},function(e){e.O(0,[9755,6884,5021,5359],(function(){return t=79920,e(e.s=t);var t}));e.O()}]);